// single-spa-react@6.0.2 downloaded from https://ga.jspm.io/npm:single-spa-react@6.0.2/lib/esm/single-spa-react.js

function e(c,u){var h=Object.keys(c);if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(c);u&&(R=R.filter((function(u){return Object.getOwnPropertyDescriptor(c,u).enumerable}))),h.push.apply(h,R)}return h}function t(c){for(var u=1;u<arguments.length;u++){var h=null!=arguments[u]?arguments[u]:{};u%2?e(Object(h),!0).forEach((function(u){o(c,u,h[u])})):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(h)):e(Object(h)).forEach((function(u){Object.defineProperty(c,u,Object.getOwnPropertyDescriptor(h,u))}))}return c}function n(c){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"==typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(c)}function o(c,u,h){return u in c?Object.defineProperty(c,u,{value:h,enumerable:!0,configurable:!0,writable:!0}):c[u]=h,c}function r(c){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"==typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(c)}function a(c,u){var h;if("function"!=typeof(h=u.domElement?function(){return u.domElement}:u.domElementGetter?u.domElementGetter:c.domElementGetter?c.domElementGetter:function(c){var u=c.appName||c.name;if(!u)throw Error("single-spa's dom-element-getter-helpers was not given an application name as a prop, so it can't make a unique dom element container for the react application");var h="single-spa-application:".concat(u);return function(){var c=document.getElementById(h);return c||((c=document.createElement("div")).id=h,document.body.appendChild(c)),c}}(u)))throw Error("single-spa's dom-element-getter-helpers was given an invalid domElementGetter for application or parcel '".concat(u.name,"'. Expected a function, received ").concat(r(h)));return function(){var c=h(u);if(!(c instanceof HTMLElement))throw Error("single-spa's dom-element-getter-helpers: domElementGetter returned an invalid dom element for application or parcel '".concat(u.name,"'. Expected HTMLElement, received ").concat(r(c)));return c}}var c=null;try{c=require("react").createContext()}catch(e){}var u={React:null,ReactDOM:null,ReactDOMClient:null,rootComponent:null,loadRootComponent:null,errorBoundary:null,errorBoundaryClass:null,domElementGetter:null,parcelCanUpdate:!0,suppressComponentDidCatchWarning:!1,domElements:{},renderResults:{},updateResolves:{},unmountResolves:{}};function i(h){if("object"!==n(h))throw new Error("single-spa-react requires a configuration object");var R,b=t(t({},u),h);if(!b.React)throw new Error("single-spa-react must be passed opts.React");if(!b.ReactDOM&&!b.ReactDOMClient)throw new Error("single-spa-react must be passed opts.ReactDOM or opts.ReactDOMClient");b.renderType||(null!==(R=b.ReactDOMClient)&&void 0!==R&&R.createRoot?b.renderType="createRoot":b.renderType="render");if(!b.rootComponent&&!b.loadRootComponent)throw new Error("single-spa-react must be passed opts.rootComponent or opts.loadRootComponent");if(b.errorBoundary&&"function"!=typeof b.errorBoundary)throw Error("The errorBoundary opt for single-spa-react must either be omitted or be a function that returns React elements");!c&&b.React.createContext&&(c=b.React.createContext()),b.SingleSpaRoot=function(c){function t(c){t.displayName="SingleSpaRoot(".concat(c.name,")")}return t.prototype=Object.create(c.React.Component.prototype),t.prototype.componentDidMount=function(){setTimeout(this.props.mountFinished)},t.prototype.componentWillUnmount=function(){setTimeout(this.props.unmountFinished)},t.prototype.render=function(){return setTimeout(this.props.updateFinished),this.props.children},t}(b);var v={bootstrap:s.bind(null,b),mount:p.bind(null,b),unmount:l.bind(null,b)};return b.parcelCanUpdate&&(v.update=m.bind(null,b)),v}function s(c,u){return c.rootComponent?Promise.resolve():c.loadRootComponent(u).then((function(u){c.rootComponent=u}))}function p(c,u){return new Promise((function(h,R){c.suppressComponentDidCatchWarning||!function(c){if(!(c&&"string"==typeof c.version&&c.version.indexOf(".")>=0))return!1;var u=c.version.slice(0,c.version.indexOf("."));try{return Number(u)>=16}catch(c){return!1}}(c.React)||c.errorBoundary||c.errorBoundaryClass||(c.rootComponent.prototype?c.rootComponent.prototype.componentDidCatch||console.warn("single-spa-react: ".concat(u.name||u.appName||u.childAppName,"'s rootComponent should implement componentDidCatch to avoid accidentally unmounting the entire single-spa application.")):console.warn("single-spa-react: ".concat(u.name||u.appName||u.childAppName,"'s rootComponent does not implement an error boundary.  If using a functional component, consider providing an opts.errorBoundary to singleSpaReact(opts).")));var b=y(c,u,(function(){h(this)})),v=a(c,u)(),g=function(c){var u=c.reactDom,h=c.renderType,R=c.elementToRender,b=c.domElement,v=u[h];if("function"!=typeof v)throw new Error('renderType "'.concat(h,'" did not return a function.'));switch(h){case"createRoot":case"unstable_createRoot":case"createBlockingRoot":case"unstable_createBlockingRoot":var g=v(b);return g.render(R),g;case"hydrateRoot":return v(b,R);case"hydrate":default:return v(R,b),null}}({elementToRender:b,domElement:v,reactDom:d(c),renderType:f(c)});c.domElements[u.name]=v,c.renderResults[u.name]=g}))}function l(c,u){return new Promise((function(h){c.unmountResolves[u.name]=h;var R=c.renderResults[u.name];R&&R.unmount?R.unmount():d(c).unmountComponentAtNode(c.domElements[u.name]),delete c.domElements[u.name],delete c.renderResults[u.name]}))}function m(c,u){return new Promise((function(h){c.updateResolves[u.name]||(c.updateResolves[u.name]=[]),c.updateResolves[u.name].push(h);var R=y(c,u,null),b=c.renderResults[u.name];if(b&&b.render)b.render(R);else{var v=a(c,u)();d(c).render(R,v)}}))}function d(c){return c.ReactDOMClient||c.ReactDOM}function f(c){return"function"==typeof c.renderType?c.renderType():c.renderType}function y(u,h,R){var b=u.React.createElement(u.rootComponent,h),v=c?u.React.createElement(c.Provider,{value:h},b):b;return(u.errorBoundary||h.errorBoundary||u.errorBoundaryClass||h.errorBoundaryClass)&&(u.errorBoundaryClass=u.errorBoundaryClass||h.errorBoundaryClass||function(c,u){function n(u){c.React.Component.apply(this,arguments),this.state={caughtError:null,caughtErrorInfo:null},n.displayName="SingleSpaReactErrorBoundary(".concat(u.name,")")}return n.prototype=Object.create(c.React.Component.prototype),n.prototype.render=function(){return this.state.caughtError?(c.errorBoundary||u.errorBoundary)(this.state.caughtError,this.state.caughtErrorInfo,this.props):this.props.children},n.prototype.componentDidCatch=function(c,u){this.setState({caughtError:c,caughtErrorInfo:u})},n}(u,h),v=u.React.createElement(u.errorBoundaryClass,h,v)),u.React.createElement(u.SingleSpaRoot,t(t({},h),{},{mountFinished:R,updateFinished:function(){u.updateResolves[h.name]&&(u.updateResolves[h.name].forEach((function(c){return c()})),delete u.updateResolves[h.name])},unmountFinished:function(){u.unmountResolves[h.name]&&(u.unmountResolves[h.name](),delete u.unmountResolves[h.name])}}),v)}export{c as SingleSpaContext,i as default};

